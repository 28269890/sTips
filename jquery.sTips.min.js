/*
	jQuery 鼠标提示插件 v2.1

	https://github.com/28269890/sTips

	Demo：https://28269890.github.io/sTips

*/
(function(a){a.fn.zIndex=function(g){if(void 0!==g)return this.css("zIndex",g);if(this.length){g=a(this[0]);for(var b;g.length&&g[0]!==document;){b=g.css("position");if("absolute"===b||"relative"===b||"fixed"===b)if(b=parseInt(g.css("zIndex"),10),!isNaN(b)&&0!==b)return b;g=g.parent()}}return 0};a.fn.sTips=function(g){var b=a.extend({},a.fn.sTips.defaults,g);0==a("#_sTips").size()&&a("body").append("\x3cdiv id\x3d'_sTips'\x3e\x3c/div\x3e");a("#_sTips").hide();a("#_sTips").bind({mouseenter:function(){a("#_sTips").stop(!0).fadeTo(b.inTime,b.phy)},mouseleave:function(){a("#_sTips").fadeOut(b.outTime)}});var h=function(f){var d=a(f).offset(),c=d.left,e=d.top-a("#_sTips").outerHeight();"1"==b.position&&(c=d.left-a("#_sTips").outerWidth(),e=d.top-a("#_sTips").outerHeight());"11"==b.position&&(c=d.left,e=d.top-a("#_sTips").outerHeight());"12"==b.position&&(c=d.left-a("#_sTips").outerWidth(),e=d.top);"2"==b.position&&(c=d.left+a(f).outerWidth(),e=d.top-a("#_sTips").outerHeight());"21"==b.position&&(c=d.left+a(f).outerWidth()-a("#_sTips").outerWidth(),e=d.top-a("#_sTips").outerHeight());"22"==b.position&&(c=d.left+a(f).outerWidth(),e=d.top);"3"==b.position&&(c=d.left+a(f).outerWidth(),e=d.top+a(f).outerHeight());"31"==b.position&&(c=d.left+a(f).outerWidth(),e=d.top+a(f).outerHeight()-a("#_sTips").outerHeight());"32"==b.position&&(c=d.left+a(f).outerWidth()-a("#_sTips").outerWidth(),e=d.top+a(f).outerHeight());"4"==b.position&&(c=d.left-a("#_sTips").outerWidth(),e=d.top+a(f).outerHeight());"41"==b.position&&(c=d.left-a("#_sTips").outerWidth(),e=d.top+a(f).outerHeight()-a("#_sTips").outerHeight());"42"==b.position&&(c=d.left,e=d.top+a(f).outerHeight());c+a("#_sTips").outerWidth()>=document.body.clientWidth&&(c=document.body.clientWidth-a("#_sTips").outerWidth());e+a("#_sTips").outerHeight()>=document.body.clientHeight&&(e=document.body.clientHeight-a("#_sTips").outerHeight());0>c&&(c=0);0>e&&(e=0);a("#_sTips").css({left:c,top:e})};this.each(function(){var f=this;this.alt&&(this.sTips=this.alt,a(this).removeAttr("alt"));this.title&&(this.sTips=this.title,a(this).removeAttr("title"));a(this).attr("sTips")&&(this.sTips=a(this).attr("sTips"));if(void 0!=this.sTips){var d=this.sTips.indexOf("{||}");0<d?(this.sTipsTop=this.sTips.substr(0,d),this.sTipsBody=this.sTips.substr(d+4,this.sTips.length)):this.sTipsBody=this.sTips;a(this).on({mousemove:function(c){if(0!=b.mouse){var e=c.pageX;c=c.pageY;1==b.mouse?(e-=b.mousez+a("#_sTips").outerWidth(),c-=b.mousez+a("#_sTips").outerHeight()):2==b.mouse?(e+=b.mousez,c-=b.mousez+a("#_sTips").outerHeight()):3==b.mouse?(e+=b.mousez,c+=b.mousez):4==b.mouse&&(e-=b.mousez+a("#_sTips").outerWidth(),c+=b.mousez);e+a("#_sTips").outerWidth()>=document.body.clientWidth&&(e=document.body.clientWidth-a("#_sTips").outerWidth());c+a("#_sTips").outerHeight()>=document.body.clientHeight&&(c=document.body.clientHeight-a("#_sTips").outerHeight());0>e&&(e=0);0>c&&(c=0);a("#_sTips").css({left:e,top:c})}},mouseenter:function(){a("#_sTips").hide();a("#_sTips").stop();a("#_sTips").html("");this.sTipsTop&&(a("#_sTips").prepend("\x3cdiv id\x3d'_sTips_Top' class\x3d'"+b.topCss+"'\x3e"+this.sTipsTop+"\x3c/div\x3e"),a("#_sTips_Top").addClass(b.topCss));a("#_sTips").append("\x3cdiv id\x3d'_sTips_body' class\x3d'"+b.bodyCss+"'\x3e\x3c/div\x3e");a("#_sTips").addClass(b.sTipsCss);a("#_sTips").css("z-index",a(this).zIndex()+1);if("ajax:"==this.sTipsBody.substr(0,5))a("#_sTips_body").html(b.ajaxloading),a.ajax({url:this.sTipsBody.substr(5,this.sTipsBody.length),dataType:"html",global:!1,error:function(c,d){"error"==d&&"off"!=b.ajaxerror&&(a("#_sTips_body").html("AJAX\u9519\u8bef\uff1a"+c.statusText+""),h(f))},success:function(b){a("#_sTips_body").html(b);h(f)}});else if("fn:"==this.sTipsBody.substr(0,3)){var c=eval(this.sTipsBody.substr(3,this.sTipsBody.length));c&&a("#_sTips_body").html(c)}else a("#_sTips_body").html(this.sTipsBody);h(this);a("#_sTips").fadeTo(b.inTime,b.phy)},mouseleave:function(){a("#_sTips").fadeOut(b.outTime)}})}})};a.fn.sTips.defaults={phy:1,inTime:200,outTime:200,sTipsCss:"sTips",topCss:"sTip-Top",bodyCss:"sTips-Body",ajaxError:"",ajaxLoading:"loading...",position:2,mousez:10,mouse:0}})(jQuery);