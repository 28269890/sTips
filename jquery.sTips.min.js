/*
	jQuery 鼠标提示插件 v2.0

	https://github.com/28269890/sTips

	Demo：https://28269890.github.io/sTips

*/
(function(a){a.fn.sTips=function(h){var c=a.extend({},a.fn.sTips.defaults,h);0==a("#_sTips").size()&&a("body").append("\x3cdiv id\x3d'_sTips'\x3e\x3c/div\x3e");a("#_sTips").hide();a("#_sTips").bind({mouseenter:function(){a("#_sTips").stop(!0).fadeTo(c.inTime,c.phy)},mouseleave:function(){a("#_sTips").fadeOut(c.outTime)}});var g=function(e){var b=a(e).offset(),f=b.left,d=b.top-a("#_sTips").outerHeight();"1"==c.position&&(f=b.left-a("#_sTips").outerWidth(),d=b.top-a("#_sTips").outerHeight());"11"==c.position&&(f=b.left,d=b.top-a("#_sTips").outerHeight());"12"==c.position&&(f=b.left-a("#_sTips").outerWidth(),d=b.top);"2"==c.position&&(f=b.left+a(e).outerWidth(),d=b.top-a("#_sTips").outerHeight());"21"==c.position&&(f=b.left+a(e).outerWidth()-a("#_sTips").outerWidth(),d=b.top-a("#_sTips").outerHeight());"22"==c.position&&(f=b.left+a(e).outerWidth(),d=b.top);"3"==c.position&&(f=b.left+a(e).outerWidth(),d=b.top+a(e).outerHeight());"31"==c.position&&(f=b.left+a(e).outerWidth(),d=b.top+a(e).outerHeight()-a("#_sTips").outerHeight());"32"==c.position&&(f=b.left+a(e).outerWidth()-a("#_sTips").outerWidth(),d=b.top+a(e).outerHeight());"4"==c.position&&(f=b.left-a("#_sTips").outerWidth(),d=b.top+a(e).outerHeight());"41"==c.position&&(f=b.left-a("#_sTips").outerWidth(),d=b.top+a(e).outerHeight()-a("#_sTips").outerHeight());"42"==c.position&&(f=b.left,d=b.top+a(e).outerHeight());a("#_sTips").css({left:f,top:d})};this.each(function(){var e=this;this.alt&&(this.sTips=this.alt,a(this).removeAttr("alt"));this.title&&(this.sTips=this.title,a(this).removeAttr("title"));if(void 0!=this.sTips){var b=this.sTips.indexOf("{||}");0<b?(this.sTipsTop=this.sTips.substr(0,b),this.sTipsBody=this.sTips.substr(b+4,this.sTips.length)):this.sTipsBody=this.sTips;a(this).on({mousemove:function(b){if(0!=c.mouse){var d=b.pageX;b=b.pageY;1==c.mouse?(d-=c.mousez+a("#_sTips").outerWidth(),b-=c.mousez+a("#_sTips").outerHeight()):2==c.mouse?(d+=c.mousez,b-=c.mousez+a("#_sTips").outerHeight()):3==c.mouse?(d+=c.mousez,b+=c.mousez):4==c.mouse&&(d-=c.mousez+a("#_sTips").outerWidth(),b+=c.mousez);d+a("#_sTips").outerWidth()>=document.body.clientWidth&&(d=document.body.clientWidth-a("#_sTips").outerWidth());b+a("#_sTips").outerHeight()>=document.body.clientHeight&&(b=document.body.clientHeight-a("#_sTips").outerHeight());console.log(document.body.scrollTop);0>d&&(d=0);0>b&&(b=0);a("#_sTips").css({left:d,top:b})}},mouseenter:function(){a("#_sTips").hide();a("#_sTips").stop();a("#_sTips").html("");this.sTipsTop&&(a("#_sTips").prepend("\x3cdiv id\x3d'_sTips_Top' class\x3d'"+c.topCss+"'\x3e"+this.sTipsTop+"\x3c/div\x3e"),a("#_sTips_Top").addClass(c.topCss));a("#_sTips").append("\x3cdiv id\x3d'_sTips_body' class\x3d'"+c.bodyCss+"'\x3e\x3c/div\x3e");a("#_sTips").addClass(c.sTipsCss);a("#_sTips").css("z-index",1*a(this).css("z-index")+1);if("ajax:"==this.sTipsBody.substr(0,5))a("#_sTips_body").html(c.ajaxloading),a.ajax({url:this.sTipsBody.substr(5,this.sTipsBody.length),dataType:"html",global:!1,error:function(b,f){"error"==f&&"off"!=c.ajaxerror&&(a("#_sTips_body").html("AJAX\u9519\u8bef\uff1a"+b.statusText+""),g(e))},success:function(b){a("#_sTips_body").html(b);g(e)}});else if("fn:"==this.sTipsBody.substr(0,3)){var b=eval(this.sTipsBody.substr(3,this.sTipsBody.length));b&&a("#_sTips_body").html(b)}else a("#_sTips_body").html(this.sTipsBody);g(this);a("#_sTips").fadeTo(c.inTime,c.phy)},mouseleave:function(){a("#_sTips").fadeOut(c.outTime)}})}})};a.fn.sTips.defaults={phy:1,inTime:200,outTime:200,sTipsCss:"sTips",topCss:"sTip-Top",bodyCss:"sTips-Body",ajaxError:"",ajaxLoading:"loading...",position:2,mousez:10,mouse:0}})(jQuery);